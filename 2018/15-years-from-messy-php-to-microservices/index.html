<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://fonts.googleapis.com/css?family=Merriweather:400,700" rel="stylesheet">
  <link href="/assets/main.css?build=2023-05-25T00-22" rel="stylesheet">
  <link rel="canonical" href="https://46b.it/2018/15-years-from-messy-php-to-microservices/">
  <link rel="alternate" type="application/rss+xml" title="46b.it" href="/meta/feed.atom">

  <!-- $if(math)$
  <script src="/js/mathjax/MathJax.js?config=46bit"></script>
  $endif$ -->

  <title>15 years of web development - 46b.it</title>
</head>
<body>
  <header id="header">
    <div class="wrapper">
      <h1><a href="/"><img src="/assets/logo.png" alt="46b.it" width="75"></a></h1>
      <nav>
        
        <ul>
          <li ><a href="/art/">art</a></li>
          <li class="active"><a href="/writing/">writing</a></li>
          <li><a href="https://github.com/46bit">github</a></li>
          <li><a href="https://twitter.com/46bit">twitter</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <article>
  <header class="prelude">
    <div class="wrapper">
      <p class="meta">March 31, 2018</p>
      
      <h1>15 years of web development</h1>
      
    </div>
  </header>
  <section class="wrapper">
    <p>When I started web development in the early 2000s, your typical medium sized website ran on a single codebase that ran in exactly the same way on a few webservers. The frontend, things like accessibility and JavaScript, felt like novelties.
<!--more--></p>

<p>That single codebase <em>was</em> the website. It received web requests directly from its users, it talked directly to the database that stored the website‚Äôs state, it decided all the business logic of how the website worked, and it rendered HTML to be sent back to the user.</p>

<p>Lots has changed. Some of this might be about the quality of environments I‚Äôm working in, but I don‚Äôt think very much.</p>

<h2 id="code-quality">Code quality</h2>

<p>At the time, most of the code I saw from other programmers embedded SQL queries directly into HTML templates:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>A website<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
Visitor count: <span class="cp">&lt;?php</span>
<span class="nf">mysql_exec</span><span class="p">(</span><span class="s2">"INSERT INTO visitors (ip_address) VALUES ("</span>
  <span class="mf">.</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REMOTE_ADDR'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">");"</span><span class="p">);</span>
<span class="k">echo</span> <span class="nb">mysql_fetch_row</span><span class="p">(</span><span class="nb">mysql_query</span><span class="p">(</span><span class="s2">"SELECT COUNT(*) FROM visitors;"</span><span class="p">));</span>
<span class="cp">?&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>I haven‚Äôt run that code, but it‚Äôs quite typical of what freelance web developers were doing in the early 2000s. It rarely had proper error handling, rarely prevented SQL Injection, and almost never prevented XSS Injection.</p>

<p>I got a lot of feedback about how good I was at avoiding these problems, but I eventually decided that relying on my attention to detail to avoid these problems didn‚Äôt work. Hence I picked up MySQL query parameters to avoid SQL Injection, and eventually PHP frameworks like CodeIgniter to avoid XSS Injection.</p>

<p>We‚Äôve come a long way in our tooling since then. Modern frameworks automatically escape data being output into HTML templates against XSS attacks. Modern frameworks often have an architecture that would make it inconvenient and difficult to embed database queries into HTML. Modern frameworks are often used with ORMs or other mechanisms that make SQL Injection much less likely.</p>

<p>All of this means you don‚Äôt have to think as much. Basic web application security and basic web application architecture is almost an automatic.</p>

<h2 id="coupling-of-components">Coupling of components</h2>

<p>Earlier, I described how 2000s-era websites generally had one codebase for everything and deployed a single thing onto their webservers. This can work very happily when you first build a website, but it starts to have problems if you get a lot of traffic.</p>

<p>If you want to change how data is stored, for instance to add caching around it, your first task becomes to abstract the data layer from the rest of your codebase. This could consume weeks of work without delivering any user value.</p>

<p>Since the mid/late 2000s, mainstream frameworks started to separate the data layer out, for instance keeping it in the Models if following an MVC pattern. This meant that your changes only affect a more concentrated part of the codebase. But you ultimately still have one codebase and very little abstraction.</p>

<p>Things have marched on since then. These days you commonly deploy several components, rather than just one. You‚Äôll have an API component that exposes ways to access your data but abstracts most of the details of how that‚Äôs done. You‚Äôll have a backend component that performs business logic on data it gets and sets using the API. Then you‚Äôll have a frontend component that directly interacts with user requests and talks to the backend.</p>

<p>You won‚Äôt necessarily have all these components. You can achieve a lot of the benefits by keeping this pattern in mind at an early stage. But if you‚Äôre a microservices architecture like GOV.UK you have several data layer APIs, many backends, and then relatively few frontends. Separating these components keeps each piece small enough to be effectively worked on.</p>

<h2 id="frontend-sophistication">Frontend sophistication</h2>

<p>Over those 15 years, JavaScript has gotten a lot faster and a lot more capable. Web browser APIs have gotten a lot more featureful, offering 3D graphics and videocalls and many other things besides.</p>

<p>User experience has gotten a lot better and a lot higher expectations (except for new weirdnesses like click-through cookie law banners.)</p>

<p>I started as more of a front-end developer, and then got to know the back-end as well. For many years I did freelance projects that were front-end, back-end or both and wouldn‚Äôt say I did one side better than the other.</p>

<p>I think full-stack development has become less plausible. Expectations of user experience have gotten a lot higher, and the complexity of front-end development has exploded in a new search for the best ways of doing things.</p>

<p>The challenge we seem to be left with is where business logic belongs. The frontend is nicest if you can make it a thin wrapper and push that onto the backend; the backend is nicest if you can make it a thin wrapper and push that onto the frontend.</p>

<p>At this stage I identify as a backend/operations person. I‚Äôm sure I‚Äôll work heavily with the frontend again one day, but I don‚Äôt think I can do both any longer.</p>

<h2 id="testing-and-operational-sophistication">Testing and operational sophistication</h2>

<p>Tests used to be purely for your business logic. You‚Äôd test that your code calculated the correct prices. Deployment often meant FTPing your code onto a shared hosting environment. It was a mess.</p>

<p>Things have changed for the better. Source control is almost universal. Infrastructure has gotten more accessible to developers, which is a good thing for me. Testing of running/deploying websites is much more common.</p>

<h2 id="what-hasnt-changed">What hasn‚Äôt changed?</h2>

<p>Very often we still want things to ‚Äújust work!‚Äù But what things working look like is getting better and better, and that‚Äôs a good thing.</p>

  </section>
  <div class="wrapper prev-next-jump">
    
      <a class="prev" href="/2018/blizzard/">&larr; ‚ùÑ Blizzards üå®</a>
    
    
      <a class="next" href="/2018/leader-election/">üìù Leader Election &rarr;</a>
    
  </div>
<article>

</body>
</html>
